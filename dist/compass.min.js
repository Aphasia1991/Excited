!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Compass=e():t.Compass=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=s(n);e["default"]=o["default"]},function(t,e){"use strict";t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(s[o]=!0)}for(n=0;n<e.length;n++){var r=e[n];"number"==typeof r[0]&&s[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return fetch(t).then(function(t){var e=t.json();return t.status>=200&&t.status<300?e:e.then(Promise.reject.bind(Promise))})};e["default"]={props:{timeout:{type:Number,"default":5e3},apihost:{type:String,"default":"//m.ele.me/restapi"},display:{type:Boolean,"default":!0},tips:{type:Object,"default":function(){return{loading:"正在定位，请稍后...",failed:"定位失败，无法加载分会场",fallback:"您附近的餐厅"}}},reslove:{type:Function,"default":function(){}},reject:{type:Function,"default":function(){}}},data:function(){return{geohash:"",locName:"",navHash:"",apiHash:"",apiLock:!1,isTrying:null}},computed:{locTips:function(){return this.isTrying?this.tips.loading:this.tips.failed}},watch:{geohash:function(t){t&&(clearTimeout(this.isTrying),this.reslove(t),this.getLocName())}},methods:{getLocName:function(){var t=this;this.display&&i(this.apihost+"/v2/pois/"+this.geohash).then(function(e){t.locName=e.name})["catch"](function(){t.locName=t.tips.fallback})},getApiHash:function(){var t=this;this.apiLock||(this.apiLock=!0,i(this.apihost+"/v1/cities?type=guess").then(function(e){t.apiHash=Geohash.encode(e.latitude,e.longitude)})["catch"](function(){t.apiLock=!1}))},getNavigatorHash:function(){var t=this;navigator.geolocation&&!this.navHash&&navigator.geolocation.getCurrentPosition(function(e){t.navHash=Geohash.encode(e.coords.latitude,e.coords.longitude)})},getHybridHash:function(){var t=this;hybridAPI.getGlobalGeohash(function(e){t.geohash=e})},loopTryHybrid:function(){this.geohash||this.isTrying||(this.getNavigatorHash(),this.getApiHash(),this.isTrying=setInterval(this.getHybridHash,500),setTimeout(this.stopLoopTry,this.timeout))},stopLoopTry:function(){return clearTimeout(this.isTrying),this.isTrying=null,this.geohash?void 0:this.navHash?this.geohash=this.navHash:this.apiHash?this.geohash=this.apiHash:void this.reject()}},events:{initCompass:function(t){return t?this.geohash=t:(this.getHybridHash(),void this.loopTryHybrid())}}}},function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".compass-wrap[_v-654d81f0]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:.933333rem}.compass-wrap svg[_v-654d81f0]{-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-shrink:0;flex-shrink:0;display:block;width:.4rem;height:.4rem}.compass-location[_v-654d81f0]{margin-right:.106667rem}.compass-refresh[_v-654d81f0]{position:absolute;top:50%;right:2rem;-webkit-transform:translateY(-50%) rotate(0);transform:translateY(-50%) rotate(0)}.compass-name[_v-654d81f0],.compass-tips[_v-654d81f0]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.compass-loading[_v-654d81f0]{-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:compass-rotation 1s linear infinite;animation:compass-rotation 1s linear infinite}@-webkit-keyframes compass-rotation{to{-webkit-transform:translateY(-50%) rotate(1turn);transform:translateY(-50%) rotate(1turn)}}@keyframes compass-rotation{to{-webkit-transform:translateY(-50%) rotate(1turn);transform:translateY(-50%) rotate(1turn)}}",""])},function(t,e){t.exports='<div class=compass-wrap v-if=display @click=loopTryHybrid _v-654d81f0=""> <svg class=compass-location v-if=geohash viewBox="0 0 64 64" xmlns=http://www.w3.org/2000/svg _v-654d81f0=""><path d="M32.15.304C18.47.304 7.337 11.478 7.337 25.212c0 18.856 22.126 37.26 23.067 38.034a2.743 2.743 0 0 0 3.492 0c.943-.773 23.067-19.178 23.067-38.034C56.963 11.478 45.833.304 32.15.304zm0 31.066c-5.086 0-9.21-4.112-9.21-9.185S27.064 13 32.15 13c5.088 0 9.212 4.112 9.212 9.185s-4.124 9.185-9.21 9.185h-.002z" fill-rule=evenodd _v-654d81f0=""></path></svg> <svg class=compass-refresh :class="[ isTrying ? \'compass-loading\': \'\' ]" v-else="" viewBox="0 0 64 64" xmlns=http://www.w3.org/2000/svg _v-654d81f0=""><path d="M57.927 33.253c.02-.43.032-.86.032-1.293C57.96 17.623 46.335 6 32 6a25.82 25.82 0 0 0-13.617 3.86 2.995 2.995 0 1 0 3.137 5.092A19.875 19.875 0 0 1 32 11.982c11.033 0 19.976 8.945 19.976 19.978 0 .434-.015.865-.042 1.293h-5.808l8.937 12.798L64 33.254h-6.073zM44.2 48.475c-.64 0-1.232.2-1.72.543A19.875 19.875 0 0 1 32 51.988c-11.033 0-19.976-8.945-19.976-19.978 0-.434.015-.865.042-1.293h5.808L8.937 17.92 0 30.716h6.073c-.02.43-.032.86-.032 1.293 0 14.337 11.624 25.96 25.96 25.96a25.82 25.82 0 0 0 13.617-3.86 2.995 2.995 0 0 0-1.417-5.635z" fill-rule=evenodd _v-654d81f0=""></path></svg> <span class=compass-name v-if=geohash _v-654d81f0="">{{ locName }}</span> <span class=compass-tips v-else="" _v-654d81f0="">{{ locTips }}</span> </div>'},function(t,e,i){var s,n;i(7),s=i(2),n=i(4),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,i){function s(t,e){for(var i=0;i<t.length;i++){var s=t[i],n=f[s.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](s.parts[o]);for(;o<s.parts.length;o++)n.parts.push(c(s.parts[o],e))}else{for(var r=[],o=0;o<s.parts.length;o++)r.push(c(s.parts[o],e));f[s.id]={id:s.id,refs:1,parts:r}}}}function n(t){for(var e=[],i={},s=0;s<t.length;s++){var n=t[s],o=n[0],r=n[1],a=n[2],c=n[3],l={css:r,media:a,sourceMap:c};i[o]?i[o].parts.push(l):e.push(i[o]={id:o,parts:[l]})}return e}function o(t,e){var i=d(),s=g[g.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function c(t,e){var i,s,n;if(e.singleton){var o=m++;i=v||(v=a(e)),s=l.bind(null,i,o,!1),n=l.bind(null,i,o,!0)}else i=a(e),s=p.bind(null,i),n=function(){r(i)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}function l(t,e,i,s){var n=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function p(t,e){var i=e.css,s=e.media,n=e.sourceMap;if(s&&t.setAttribute("media",s),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f={},u=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},h=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=u(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,m=0,g=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=h()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=n(t);return s(i,e),function(t){for(var o=[],r=0;r<i.length;r++){var a=i[r],c=f[a.id];c.refs--,o.push(c)}if(t){var l=n(t);s(l,e)}for(var r=0;r<o.length;r++){var c=o[r];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete f[c.id]}}}};var y=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){var s=i(3);"string"==typeof s&&(s=[[t.id,s,""]]);i(6)(s,{});s.locals&&(t.exports=s.locals)}])});